function CDOStickyMenu(b){var a=this;this.showing=false;this.currentMenu=null;this.mouseDownCapture=new EventCapturer("mousedown");this.touchStartCapture=new EventCapturer("touchstart");this.name=b;this.menubar=$(b);var c=this.menubar.children("ul").children("li");c.each(function(e,h){var g=$(h);var f=$(g.children("a")[0]);f.click(function(i){a.click(this)});f.mouseover(function(i){a.over(this)});var d=g.find(".cdoStickySubMenu a");d.each(function(i,k){var l=$(k);l.click(function(j){a.item(this.id)})})})}CDOStickyMenu.prototype.hideAll=function(){this.menubar.find("li").removeClass("stickyMenu");this.showing=false;this.currentMenu=null};CDOStickyMenu.prototype.click=function(c){var b=this;var e=$(c).parent();if(c==this.currentMenu){this.hideAll();return}this.hideAll();var e=$(c).parent();e.addClass("stickyMenu");this.showing=true;this.currentMenu=c;this.mouseDownCapture.start(function(g){b.externalClick(g)});this.touchStartCapture.start(function(g){b.externalClick(g)});var a=e.find("ul li");var d=0;a.each(function(j,k){var g=$(k);var h=Number(g.attr("naturalWidth"));if(!h){h=g.width();g.attr("naturalWidth",h)}if(h>d){d=h}});var f=a.find("a");f.width(d)};CDOStickyMenu.prototype.over=function(a){if(this.showing&&a!=this.currentMenu){this.externalClick(a);this.click(a)}};CDOStickyMenu.prototype.externalClick=function(b){if(!this.showing){return}var c=b.target;var a=this.currentMenu.parentElement;while(c){if(c==a){return}c=c.parentElement}this.mouseDownCapture.end();this.touchStartCapture.end();this.hideAll()};CDOStickyMenu.prototype.item=function(b){this.hideAll();var a=this[b];a()};CDOStickyMenu.prototype.setItemVisible=function(b,c){var a=$("#"+b).parent();a.toggleClass("hideMe",!c)};CDOStickyMenu.prototype.setClassVisible=function(a,c){var b=$("."+a);b.toggleClass("hideMe",!c)};$(document).ready(function(){cdoMenu=new CDOStickyMenu("#mainNav")});var userControl={getMousePos:function(a,c){a.preventDefault();var e=$(c).offset();var d=a.clientX-e.left+window.pageXOffset;var b=a.clientY-e.top+window.pageYOffset;return{x:d,y:b}},lastTouchX:0,lastTouchY:0,getTouchPos:function(j,a,h){var e=$(a).offset();var d=this.lastTouchX;var c=this.lastTouchY;var g=false;if(j.touches){for(var f in j.touches){var b=Number(f);if(!isNaN(b)&&b!=0){g=true}}if(!g&&h){j.preventDefault()}if(j.touches.length==1&&j.touches[0]){d=j.touches[0].clientX-e.left+window.pageXOffset;c=j.touches[0].clientY-e.top+window.pageYOffset;this.lastTouchX=d;this.lastTouchY=c}}return{x:d,y:c,multi:g,}},startCanvasMouse:function(c,d,b,a){c.addEventListener("mousedown",function(f){var e=userControl.getMousePos(f,c);if(!d.touchActive){userControl.mouseDown(e,f,c,d,b,a)}},false);c.addEventListener("mousemove",function(f){if(!b.isMouseDown&&!d.touchActive){var e=userControl.getMousePos(f,c);userControl.mouseMove(e,f,b,a)}},false);c.addEventListener("touchstart",function(f){var e=userControl.getTouchPos(f,c,false);d.touchActive=true;userControl.mouseDown(e,f,c,d,b,a)},false);c.addEventListener("touchend",function(e){e.preventDefault()},false);c.addEventListener("touchmove",function(e){userControl.getTouchPos(e,c,true)},false)},mouseDown:function(g,f,c,d,b,a){MouseUpCapture.start(function(h){var e=userControl.getMousePos(h.originalEvent,c);userControl.mouseUp(e,h.originalEvent,b)});MouseMoveCapture.start(function(h){var e=userControl.getMousePos(h.originalEvent,c);if(!d.touchActive){userControl.mouseMove(e,h.originalEvent,b,a)}});TouchEndCapture.start(function(h){var e=userControl.getTouchPos(h.originalEvent,c);userControl.mouseUp(e,h.originalEvent,b)});TouchCancelCapture.start(function(h){var e=userControl.getTouchPos(h.originalEvent,c,false);userControl.mouseUp(e,h.originalEvent,b)});TouchMoveCapture.start(function(h){var e=userControl.getTouchPos(h.originalEvent,c,true);userControl.mouseMove(e,h.originalEvent,b,a)});if(g.multi){return}b.isMouseDown=true;a.mouseAction(g)},mouseUp:function(c,a,b){MouseUpCapture.end();MouseMoveCapture.end();TouchEndCapture.end();TouchMoveCapture.end();TouchCancelCapture.end();if(c.multi){return}b.isMouseDown=false},mouseMove:function(d,b,c,a){if(d.multi){return}if(c.isMouseDown){a.mouseAction(d)}},};function EventCapturer(a){this.callbackSet=null;this.doc=$(document);this.start=function(d,c){var e=d;var f=c?c:d;if(this.callbackSet){this.end()}this.callbackSet=f;if(c){this.doc.bind(a,e,f)}else{this.doc.bind(a,f)}};this.end=function(){this.doc.unbind(a,this.callbackSet);this.callbackSet=null};this.active=function(){return this.callbackSet!=null}}MouseUpCapture=new EventCapturer("mouseup");MouseMoveCapture=new EventCapturer("mousemove");TouchEndCapture=new EventCapturer("touchend");TouchMoveCapture=new EventCapturer("touchmove");TouchCancelCapture=new EventCapturer("touchcancel");function Draggable(b,a){this.jq=b;this.handler=a;this.lastX=0;this.lastY=0;this.startX=0;this.startY=0;this.mousedown=false;this.MOUSE=0;this.TOUCH=1;this.eventType=this.MOUSE;this.extractTouch=function(c){c.clientX=this.lastX;c.clientY=this.lastY;if(c.originalEvent.touches&&c.originalEvent.touches[0]){for(var d in c.originalEvent.touches){var e=Number(d);if(!isNaN(e)&&e!=0){c.multi=true}}c.clientX=c.originalEvent.touches[0].clientX;c.clientY=c.originalEvent.touches[0].clientY}};this.handleMouseDown=function(c){this.eventType=this.MOUSE;this.mouseDown(c)};this.handleTouchDown=function(c){this.eventType=this.TOUCH;this.extractTouch(c);this.mouseDown(c)};this.mouseDown=function(c){this.lastX=this.startX=c.clientX;this.lastY=this.startY=c.clientY;this.mousedown=true;if(this.eventType==this.MOUSE){c.preventDefault()}MouseUpCapture.start({drag:this},function(d){d.data.drag.handleMouseUp(d)});MouseMoveCapture.start({drag:this},function(d){d.data.drag.handleMouseMove(d)});TouchEndCapture.start({drag:this},function(d){d.data.drag.handleTouchUp(d)});TouchMoveCapture.start({drag:this},function(d){d.data.drag.handleTouchMove(d)});if(this.handler.dragStart&&c.clientX){this.handler.dragStart(c)}};this.handleMouseMove=function(c){if(this.eventType==this.MOUSE){this.mouseMove(c)}};this.handleTouchMove=function(c){if(this.eventType==this.TOUCH){this.extractTouch(c);this.mouseMove(c)}};this.mouseMove=function(c){if(!this.mousedown&&!this.handler.dragOver){return}if(c.multi){return}c.preventDefault();if(!this.lastX||!this.lastY){this.lastX=c.clientX;this.lastY=c.clientY}if(!this.startX||!this.startY){this.startX=c.clientX;this.startY=c.clientY}if(c.clientX){if(this.mousedown&&this.handler.dragMove){this.handler.dragMove(c)}else{if(!this.mousedown&&this.handler.dragOver){this.handler.dragOver(c)}}}this.lastX=c.clientX;this.lastY=c.clientY};this.handleMouseUp=function(c){if(this.eventType==this.MOUSE){this.mouseUp(c)}};this.handleTouchUp=function(c){if(this.eventType==this.TOUCH){this.extractTouch(c);this.mouseUp(c)}};this.mouseUp=function(c){this.stop();if(this.eventType==this.MOUSE){c.preventDefault()}if(c.clientX!=undefined&&c.clientY!=undefined&&(this.lastX!=c.clientX||this.lastY!=c.clientY)){this.lastX=c.clientX;this.lastY=c.clientY;if(this.handler.dragMove){this.handler.dragMove(c)}}if(this.handler.dragEnd){this.handler.dragEnd(c)}this.lastX=null;this.lastY=null};this.jq.mousedown({drag:this},function(c){c.data.drag.handleMouseDown(c)});this.jq.on("touchstart",{drag:this},function(c){c.data.drag.handleTouchDown(c)});this.jq.mousemove({drag:this},function(c){c.data.drag.handleMouseMove(c)});this.jq.on("touchmove",{drag:this},function(c){c.data.drag.handleTouchMove(c)});this.stop=function(){this.mousedown=false;MouseUpCapture.end();MouseMoveCapture.end();TouchEndCapture.end();TouchMoveCapture.end()}};